defaults:
  query:
    retry:
      initialInterval: 5000
      maximumInterval: 30000
      maximumAttempts: 50 # We really want to finish! But there are huge intervals in the retry
      nonRecoverableErrors:
        - "Not Found"
    throttle: # OK this isn't much of a throttle
      max: 100
      tokensPer100ms: 0.1
  auth:
    method: ApiKey
    credentials:
      apiKey: "{source}_APIKEY"
  target:
    retry: defaultRetryPolicy
    throttle:
      max: 10000
    file: "target/index/{index}/{name}_{num}.json"
    max: 10000000
  scan:
    aclIndex: ".search-acl-filter-{index}"

index:
#  github:
#    scan:
#      organisations:
#        - "focuson-ts"
#      #        - "run-book"
#      users:
#        - phil-rice-HCL
#      #        - phil-rice
#      indexPeople: true
#  gitlab:
#    target:
#      file: "target/index/{index}/Project_{id_3}_{num}.json"
#    scan:
#      baseurl: "https://gitlab.com/"
#      auth:
#        method: 'PrivateToken'
#        credentials:
#          token: 'GITLAB_TOKEN'
#      projects:
#        - "validoc" #I think this needs work on it... We need to start thinking about groups...
#  jira1:
#    type: jira
#    scan:
#      auth:
#        method: 'Basic'
#        credentials:
#          username: 'phil.rice@validoc.org'
#          password: 'JIRA_TOKEN'
#      aclIndex: 'jira1-acl'
#      projects: "*"
#      indexPeople: true
#      baseurl: "https://validoc.atlassian.net/"
#      apiVersion: "3"
  jiraProd:
    type: jira
    scan:
      auth:
        method: 'ApiKey'
        credentials:
          apiKey: 'JIRA_PROD'
      aclIndex: 'jira-prod-acl'
      projects: "*"
      indexPeople: true
      baseurl: "https://jira.eon.com/"
      apiVersion: "2"

#  jira2:
#    type: jira
#    scan:
#      auth:
#        method: 'Basic'
#        credentials:
#          username: 'phil.rice'
#          password: 'JIRA_LOCAL_TOKEN'
#      aclIndex: 'jira2-acl'
#      projects: "*"
#      indexPeople: true
#      baseurl: "http://localhost:8080/"
#      apiVersion: "2"

