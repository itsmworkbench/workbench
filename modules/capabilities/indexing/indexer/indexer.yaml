---
defaults:
  query:
    retry:
      initialInterval: 5000
      maximumInterval: 30000
      maximumAttempts: 50
      nonRecoverableErrors:
        - Not Found
    throttle:
      max: 100
      tokensPer100ms: 0.1
  auth:
    method: ApiKey
    credentials:
      apiKey: "{source}_APIKEY"
  target:
    retry: defaultRetryPolicy
    throttle:
      max: 10000
    file: "{rootDir}/index/{index}/{name}_{num}.json"
    max: 10000000
  scan:
    aclIndex: .search-acl-filter-{index}

index:
  #  jiraAcl:
  #    scan:
  #      groupMembersFile: group.members.csv
  #      index: .search-acl-filter-jira-prod
  #  jira:
  #    type: jira
  #    scan:
  #      auth:
  #        method: ApiKey
  #        credentials:
  #          apiKey: JIRA_PROD
  #      index: jira-prod
  #      projects: "*"
  #      indexPeople: false
  #      baseurl: https://jira.eon.com/
  #      apiVersion: "2"
  #
  #  gitlab:
  #    target:
  #      file: "{rootDir}/index/{index}/Project_{id_3}_{num}.json"
  #    scan:
  #      baseurl: https://git.eon-cds.de/
  #      index: gitlab-prod
  #      auth:
  #        method: PrivateToken
  #        credentials:
  #          token: GITLAB_TOKEN
  #      projects:
  #        - 33519
  gitlabAcl:
    type: gitlabAcl
    scan:
      baseurl: https://git.eon-cds.de/
      idPattern: "{id}@eon.com"
      index: .search-acl-filter-gitlab-prod
      auth:
        method: PrivateToken
        credentials:
          token: GITLAB_TOKEN
  jiraPlay:
    type: jira # actually Jiraplay
    scan:
      auth:
        method: EntraId
        credentials:
          tenantId: 03e6c03e-074e-474c-8d40-3eac96d82a77            # From entraid/overview
          clientId: 2e809693-f124-4729-bfea-086d5a9a8ce8            # From Application Id in entra ID
          clientSecret: ENTRA_CLIENT_SECRET
          scope:  "https://graph.microsoft.com/.default"

#  confluence:
#    query:
#      throttle:
#        max: 100
#        tokensPer100ms: 0.1
#    scan:
#      baseurl: https://confluence.eon.com/
#      auth:
#        method: ApiKey
#        credentials:
#          apiKey: CONFLUENCE_TOKEN
#      index: confluence-prod
#  confluenceAcl:
#    type: confluenceAcl
#    scan:
#      baseurl: https://confluence.eon.com/
#      spaces:
#        - m8nmvp1
#      auth:
#        method: ApiKey
#        credentials:
#          apiKey: CONFLUENCE_TOKEN
#      index: .search-acl-filter-confluence-prod
#      emailSuffix: "@eon.com"
